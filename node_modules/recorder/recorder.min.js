(function(){function t(e,r,n){var i=t.resolve(e);if(null==i){n=n||e,r=r||"root";var a=Error('Failed to require "'+n+'" from "'+r+'"');throw a.path=n,a.parent=r,a.require=!0,a}var o=t.modules[i];return o.exports||(o.exports={},o.client=o.component=!0,o.call(this,o.exports,t.relative(i),o)),o.exports}t.modules={},t.aliases={},t.resolve=function(e){"/"===e.charAt(0)&&(e=e.slice(1));for(var r=e+"/index.js",n=[e,e+".js",e+".json",e+"/index.js",e+"/index.json"],i=0;n.length>i;i++){var e=n[i];if(t.modules.hasOwnProperty(e))return e}return t.aliases.hasOwnProperty(r)?t.aliases[r]:void 0},t.normalize=function(t,e){var r=[];if("."!=e.charAt(0))return e;t=t.split("/"),e=e.split("/");for(var n=0;e.length>n;++n)".."==e[n]?t.pop():"."!=e[n]&&""!=e[n]&&r.push(e[n]);return t.concat(r).join("/")},t.register=function(e,r){t.modules[e]=r},t.alias=function(e,r){if(!t.modules.hasOwnProperty(e))throw Error('Failed to alias "'+e+'", it does not exist');t.aliases[r]=e},t.relative=function(e){function r(t,e){for(var r=t.length;r--;)if(t[r]===e)return r;return-1}function n(r){var i=n.resolve(r);return t(i,e,r)}var i=t.normalize(e,"..");return n.resolve=function(n){var a=n.charAt(0);if("/"==a)return n.slice(1);if("."==a)return t.normalize(i,n);var o=e.split("/"),s=r(o,"deps")+1;return s||(s=0),n=o.slice(0,s+1).join("/")+"/deps/"+n},n.exists=function(e){return t.modules.hasOwnProperty(n.resolve(e))},n},t.register("component-indexof/index.js",function(t,e,r){var n=[].indexOf;r.exports=function(t,e){if(n)return t.indexOf(e);for(var r=0;t.length>r;++r)if(t[r]===e)return r;return-1}}),t.register("component-emitter/index.js",function(t,e,r){function n(t){return t?i(t):void 0}function i(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}var a=e("indexof");r.exports=n,n.prototype.on=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},n.prototype.once=function(t,e){function r(){n.off(t,r),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},e._off=r,this.on(t,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[t];if(!r)return this;if(1==arguments.length)return delete this._callbacks[t],this;var n=a(r,e._off||e);return~n&&r.splice(n,1),this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks[t];if(r){r=r.slice(0);for(var n=0,i=r.length;i>n;++n)r[n].apply(this,e)}return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}}),t.register("component-inherit/index.js",function(t,e,r){r.exports=function(t,e){var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}),t.register("adamsanderson-trigger-event/index.js",function(t,e,r){function n(t,e,r){var n,u;if(u=a[e],!u)throw new SyntaxError("Unknown event type: "+u);if(r=r||{},i(o,r),document.createEvent)n=document.createEvent(u),s[u](t,e,n,r),t.dispatchEvent(n);else{n=document.createEventObject();for(var h in r)n[h]=r[h];t.fireEvent("on"+e,n)}}var i=e("inherit");r.exports=n;var a={load:"HTMLEvents",unload:"HTMLEvents",abort:"HTMLEvents",error:"HTMLEvents",select:"HTMLEvents",change:"HTMLEvents",submit:"HTMLEvents",reset:"HTMLEvents",focus:"HTMLEvents",blur:"HTMLEvents",resize:"HTMLEvents",scroll:"HTMLEvents",input:"HTMLEvents",click:"MouseEvents",dblclick:"MouseEvents",mousedown:"MouseEvents",mouseup:"MouseEvents",mouseover:"MouseEvents",mousemove:"MouseEvents",mouseout:"MouseEvents",contextmenu:"MouseEvents"},o={clientX:0,clientY:0,button:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0,cancelable:!0},s={HTMLEvents:function(t,e,r,n){return r.initEvent(e,n.bubbles,n.cancelable)},MouseEvents:function(t,e,r,n){var i,a,o="screenX"in n?n.screenX:n.clientX,s="screenY"in n?n.screenY:n.clientY;return i="detail"in n?n.detail:"dblclick"===e?2:1,"contextmenu"===e&&(a=a=n.button||2),r.initMouseEvent(e,n.bubbles,n.cancelable,document.defaultView,i,o,s,n.clientX,n.clientY,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,a,t)}}}),t.register("Contra-whammy/whammy.js",function(t,e,r){r.exports=function(){function t(t,r){for(var n=e(t),i=3e4,o=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:c(n.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:25541},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:n.width,id:176},{data:n.height,id:186}]}]}]}]}],u=0,h=0;t.length>u;){var d=[],l=0;do d.push(t[u]),l+=t[u].duration,u++;while(t.length>u&&i>l);var f=0,p={id:524531317,data:[{data:h,id:231}].concat(d.map(function(t){var e=s({discardable:0,frame:t.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(f)});return f+=t.duration,{data:e,id:163}}))};o[1].data.push(p),h+=l}return a(o,r)}function e(t){for(var e=t[0].width,r=t[0].height,n=t[0].duration,i=1;t.length>i;i++){if(t[i].width!=e)throw"Frame "+(i+1)+" has a different width";if(t[i].height!=r)throw"Frame "+(i+1)+" has a different height";if(0>t[i].duration||t[i].duration>32767)throw"Frame "+(i+1)+" has a weird duration (must be between 0 and 32767)";n+=t[i].duration}return{duration:n,width:e,height:r}}function r(t){for(var e=[];t>0;)e.push(255&t),t>>=8;return new Uint8Array(e.reverse())}function n(t){for(var e=new Uint8Array(t.length),r=0;t.length>r;r++)e[r]=t.charCodeAt(r);return e}function i(t){var e=[],r=t.length%8?Array(9-t.length%8).join("0"):"";t=r+t;for(var n=0;t.length>n;n+=8)e.push(parseInt(t.substr(n,8),2));return new Uint8Array(e)}function a(t,e){for(var s=[],u=0;t.length>u;u++){var h=t[u].data;"object"==typeof h&&(h=a(h,e)),"number"==typeof h&&(h=i(h.toString(2))),"string"==typeof h&&(h=n(h)),h.length;var c=h.size||h.byteLength||h.length,d=Math.ceil(Math.ceil(Math.log(c)/Math.log(2))/8),l=c.toString(2),f=Array(7*d+7+1-l.length).join("0")+l,p=Array(d).join("0")+"1"+f;s.push(r(t[u].id)),s.push(i(p)),s.push(h)}if(e){var m=o(s);return new Uint8Array(m)}return new Blob(s,{type:"video/webm"})}function o(t,e){null==e&&(e=[]);for(var r=0;t.length>r;r++)"object"==typeof t[r]?o(t[r],e):e.push(t[r]);return e}function s(t){var e=0;if(t.keyframe&&(e|=128),t.invisible&&(e|=8),t.lacing&&(e|=t.lacing<<1),t.discardable&&(e|=1),t.trackNum>127)throw"TrackNumber > 127 not supported";var r=[128|t.trackNum,t.timecode>>8,255&t.timecode,e].map(function(t){return String.fromCharCode(t)}).join("")+t.frame;return r}function u(t){for(var e=t.RIFF[0].WEBP[0],r=e.indexOf("*"),n=0,i=[];4>n;n++)i[n]=e.charCodeAt(r+3+n);var a,o,s,u,h;return h=i[1]<<8|i[0],a=16383&h,o=h>>14,h=i[3]<<8|i[2],s=16383&h,u=h>>14,{width:a,height:s,data:e,riff:t}}function h(t){for(var e=0,r={};t.length>e;){var n=t.substr(e,4),i=parseInt(t.substr(e+4,4).split("").map(function(t){var e=t.charCodeAt(0).toString(2);return Array(8-e.length+1).join("0")+e}).join(""),2),a=t.substr(e+4+4,i);e+=8+i,r[n]=r[n]||[],"RIFF"==n||"LIST"==n?r[n].push(h(a)):r[n].push(a)}return r}function c(t){return[].slice.call(new Uint8Array(new Float64Array([t]).buffer),0).map(function(t){return String.fromCharCode(t)}).reverse().join("")}function d(t,e){this.frames=[],this.duration=1e3/t,this.quality=e||.8}return d.prototype.add=function(t,e){if(e!==void 0&&this.duration)throw"you can't pass a duration if the fps is set";if(e===void 0&&!this.duration)throw"if you don't have the fps set, you ned to have durations here.";if("canvas"in t&&(t=t.canvas),"toDataURL"in t)t=t.toDataURL("image/webp",this.quality);else if("string"!=typeof t)throw"frame must be a a HTMLCanvasElement, a CanvasRenderingContext2D or a DataURI formatted string";if(!/^data:image\/webp;base64,/gi.test(t))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:t,duration:e||this.duration})},d.prototype.compile=function(e){return new t(this.frames.map(function(t){var e=u(h(atob(t.image.slice(23))));return e.duration=t.duration,e}),e)},{Video:d,fromImageArray:function(e,r,n){return t(e.map(function(t){var e=u(h(atob(t.slice(23))));return e.duration=1e3/r,e}),n)},toWebM:t}}()}),t.register("recorder/dist/main.js",function(t,e,r){var n,i,a,o,s,u,h,c=function(t,e){return function(){return t.apply(e,arguments)}},d={}.hasOwnProperty,l=function(t,e){function r(){this.constructor=t}for(var n in e)d.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};n=e("emitter"),u=e("trigger-event"),a=e("whammy"),s=function(t,e){var r;r=document.createElement("a"),r.href=e,r.target="_blank",r.download=t,u(r,"click")},o=function(t,e){var r;return r=new FileReader,r.readAsDataURL(t),r.onload=function(t){return e(t.target.result)}},i=function(t){function e(t,e){this.fps=null!=e?e:32,this.clear=c(this.clear,this),this.toBlob=c(this.toBlob,this),this.toDataURL=c(this.toDataURL,this),this.stop=c(this.stop,this),this.save=c(this.save,this),this.start=c(this.start,this),this.grab=c(this.grab,this),t.jquery?(this.height=t.height(),this.width=t.width(),this.el=t[0]):(this.height=t.clientHeight,this.width=t.clientWidth,this.el=t),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.height=this.height,this.canvas.width=this.width,this.interval=1e3/this.fps,this.frames=[],this._requested=null,this.delta=null,this.then=Date.now(),this.now=null}return l(e,t),e.prototype.grab=function(){var t;return this._requested=requestAnimationFrame(this.grab),this.now=Date.now(),this.delta=this.now-this.then,this.delta>this.interval&&(this.then=this.now-this.delta%this.interval,this.context.drawImage(this.el,0,0,this.width,this.height),t=this.canvas.toDataURL("image/webp",1),this.frames.push(t),this.emit("frame",t)),this},e.prototype.start=function(){return this.grab(),this},e.prototype.save=function(t){return null==t&&(t="recording.webm"),this.toDataURL(function(e,r){return s(t,r)}),this},e.prototype.stop=function(){return cancelAnimationFrame(this._requested),this},e.prototype.toDataURL=function(t){return this.toBlob(function(e,r){return null!=e?t(e):o(r,function(e){return t(null,e)})})},e.prototype.toBlob=function(t){var e;return e=a.fromImageArray(this.frames,this.fps),t(null,e)},e.prototype.clear=function(){return this.frames=[],this},e}(n),h=function(t){return new i(t)},h.Recorder=i,r.exports=h}),t.alias("component-emitter/index.js","recorder/deps/emitter/index.js"),t.alias("component-indexof/index.js","component-emitter/deps/indexof/index.js"),t.alias("adamsanderson-trigger-event/index.js","recorder/deps/trigger-event/index.js"),t.alias("component-inherit/index.js","adamsanderson-trigger-event/deps/inherit/index.js"),t.alias("Contra-whammy/whammy.js","recorder/deps/whammy/whammy.js"),t.alias("Contra-whammy/whammy.js","recorder/deps/whammy/index.js"),t.alias("Contra-whammy/whammy.js","Contra-whammy/index.js"),t.alias("recorder/dist/main.js","recorder/index.js"),"object"==typeof exports?module.exports=t("recorder"):"function"==typeof define&&define.amd?define(function(){return t("recorder")}):window.recorder=t("recorder")})();